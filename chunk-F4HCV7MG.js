import{e as Z,f as ee,g as te}from"./chunk-MUTB2TKD.js";import{a as Q,b as oe}from"./chunk-UI4BADPC.js";import{b as z,e as q,f as G,g as H,h as J,i as K,j as U,m as X,o as Y,p as $}from"./chunk-3ISTCKLJ.js";import{q as O}from"./chunk-WPRVVZZ7.js";import{M as A}from"./chunk-WHRSLBFN.js";import{$b as j,Bb as d,Da as b,Eb as y,Hb as k,Ib as D,Jb as F,Lb as w,N as v,Nb as R,Pa as c,Qa as S,Rb as h,Sb as C,Tb as g,Vb as P,bb as W,gb as x,ib as M,ka as L,mb as E,nb as T,sb as l,tb as s,ua as i,ub as I,va as r,wa as N,wb as V,xa as B,zb as f}from"./chunk-HG3JTMY3.js";var ne=["customerTemplate"];function ie(u,p){u&1&&(l(0,"span",7),w(1,"*"),s())}function re(u,p){if(u&1&&(l(0,"label",3),w(1),x(2,ie,2,0,"span",7),s()),u&2){let n=d();c(),R(" ",n.label," "),c(),T(2,n._required?2:-1)}}function le(u,p){if(u&1){let n=V();l(0,"form",8,2),f("ngSubmit",function(){i(n);let t=d();return r(t.saveCustomer())}),l(2,"div",9)(3,"h5",10),w(4," Add New Customer "),s(),l(5,"button",11),f("click",function(){i(n);let t=d();return r(t.slideClose())}),N(),l(6,"svg",12),I(7,"path",13),s()()(),B(),l(8,"div",14)(9,"div",15)(10,"div",16)(11,"div",17)(12,"div",18)(13,"app-input-control",19),g("ngModelChange",function(t){i(n);let e=d();return C(e.customer.customerName,t)||(e.customer.customerName=t),r(t)}),s()(),l(14,"div",18)(15,"app-input-control",20),g("ngModelChange",function(t){i(n);let e=d();return C(e.customer.customerRefNo,t)||(e.customer.customerRefNo=t),r(t)}),s()(),l(16,"div",18)(17,"app-number-control",21),g("ngModelChange",function(t){i(n);let e=d();return C(e.customer.contactNo,t)||(e.customer.contactNo=t),r(t)}),s()(),l(18,"div",18)(19,"app-input-control",22),g("ngModelChange",function(t){i(n);let e=d();return C(e.customer.emailId,t)||(e.customer.emailId=t),r(t)}),s()(),l(20,"div",18)(21,"app-input-control",23),g("ngModelChange",function(t){i(n);let e=d();return C(e.customer.addressLine1,t)||(e.customer.addressLine1=t),r(t)}),s()(),l(22,"div",18)(23,"app-input-control",24),g("ngModelChange",function(t){i(n);let e=d();return C(e.customer.addressLine2,t)||(e.customer.addressLine2=t),r(t)}),s()(),l(24,"div",18)(25,"app-input-control",25),g("ngModelChange",function(t){i(n);let e=d();return C(e.customer.addressLine3,t)||(e.customer.addressLine3=t),r(t)}),s()()()()()(),l(26,"div",26)(27,"div",27)(28,"button",28),f("click",function(){i(n);let t=d();return r(t.slideClose())}),w(29," Cancel "),s(),l(30,"button",29),w(31," Save "),s()()()()}if(u&2){let n=d();c(13),h("ngModel",n.customer.customerName),c(2),h("ngModel",n.customer.customerRefNo),c(2),h("ngModel",n.customer.contactNo),c(2),h("ngModel",n.customer.emailId),c(2),h("ngModel",n.customer.addressLine1),c(2),h("ngModel",n.customer.addressLine2),c(2),h("ngModel",n.customer.addressLine3)}}var ve=(()=>{let p=class p extends Y{set displayText(o){this.searchText=o||""}get displayText(){return this.searchText}set disabled(o){this._disabled=o||!1}get disabled(){return this._disabled}constructor(o,t,e,a){super(),this.control=o,this.slideDialog=t,this.api=e,this.data=a,this.customer=new O,this.options={hideErrorMethod:!0,hideFullSpinner:!0,type:""},this.loadingTrue=!1,this.items=[],this.className="",this.searchText="",this._disabled=!1,this.onSelect=new b,this.onSelectBlur=new b,this.control&&(this.control.valueAccessor=this),this.xControl=this.control}ngOnInit(){this.setValidate(this.control)}autoClear(){}doSelect(o){this.onSelect.next(o)}doSelectBlur(){this.onSelectBlur.next(this.searchText)}searchCustomer(o){if(console.log(o),o){let t="";o.type==="focus"?t="":t=o,this.loadingTrue=!0;let e={data1:"cust",data2:t,long1:1};this.api.autoSearchForCommon(e,this.options).pipe(v(()=>{this.loadingTrue=!1})).subscribe(a=>{this.items=a.lstprotoCommonDDl})}else this.searchText=""}openCustomerSlide(){this.data.slideDialogRef=this.slideDialog.open({data:{template:this.customerTemplate}})}slideClose(){this.data.slideDialogRef.close()}slideOpen(o){o&&(this.openCustomerSlide(),this.createCustomer())}createCustomer(){this.api.createCustomer().subscribe(o=>{this.customer=o,this.customer.customerName=this.searchText})}saveCustomer(){this.api.saveCustomer(this.customer).subscribe(o=>{this.customer=o,this.slideClose()})}};p.\u0275fac=function(t){return new(t||p)(S(q,10),S(te),S(oe),S(Q))},p.\u0275cmp=L({type:p,selectors:[["app-customer-search"]],viewQuery:function(t,e){if(t&1&&k(ne,7),t&2){let a;D(a=F())&&(e.customerTemplate=a.first)}},inputs:{className:"className",displayText:"displayText",disabled:"disabled"},outputs:{onSelect:"onSelect",onSelectBlur:"onSelectBlur"},standalone:!0,features:[W,P],decls:8,vars:16,consts:[["forminput",""],["customerTemplate",""],["l","ngForm"],[1,"text-xs","mb-2","font-semibold","text-[#2B2B2B]"],[1,"flex","items-center","gap-x-3"],["keyname","name","label","Customer",3,"onInput","onSelect","onBlur","onClear","onSlide","focus","items","displayText","btnClicked","name","errorTrue","isLoading","placeholder"],["type","hidden","autocomplete","off",3,"ngModelChange","blur","focus","keydown","ngModel","disabled","name","placeholder","id"],[1,"text-red-500"],[1,"flex","flex-col","h-full",3,"ngSubmit"],[1,"flex","items-center","py-4","px-4"],[1,"text-primary-dc","font-semibold"],["matRipple","","type","button",1,"ml-auto","outline-none","rounded-md","w-[34px]","h-[34px]","flex","items-center","justify-center",3,"click"],["width","28","height","28","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5 23L14 14M14 14L23 5M14 14L5 5M14 14L23 23","stroke","#2B2B2B","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex-1","relative"],[1,"absolute","top-0","left-0","right-0","bottom-0","overflow-hidden","z-0"],[1,"relative","w-full","h-full","overflow-auto","z-10","px-4"],[1,"flex","flex-col","gap-y-2"],[1,"block"],["label","Customer Name","name","customerName",3,"ngModelChange","ngModel"],["label","Customer Code","name","customerRefNo",3,"ngModelChange","ngModel"],["label","Contact Number","name","contactNo",3,"ngModelChange","ngModel"],["label","Email ID","name","emailId",3,"ngModelChange","ngModel"],["label","Address Line 1","name","addressLine1",3,"ngModelChange","ngModel"],["label","Address Line 2","name","addressLine2",3,"ngModelChange","ngModel"],["label","Address Line 3","name","addressLine3",3,"ngModelChange","ngModel"],[1,"py-2","border-t","border-t-grey-dc"],[1,"flex","items-center","justify-end","gap-x-4","px-4"],[1,"dc-button","text-[#323232]","border","border-grey-dc","max-w-max","rounded-md","hover:bg-[#747474]","hover:text-white",3,"click"],[1,"dc-button","max-w-max","text-white","bg-[#B188FF]","border","border-[#722BE2]","rounded-md","hover:bg-[#722BE2]"]],template:function(t,e){if(t&1){let a=V();l(0,"div"),x(1,re,3,2,"label",3),l(2,"div",4)(3,"app-auto-complete",5),f("onInput",function(m){return i(a),r(e.searchCustomer(m))})("onSelect",function(m){return i(a),r(e.doSelect(m))})("onBlur",function(){return i(a),r(e.doBlur())})("onClear",function(){return i(a),r(e.autoClear())})("onSlide",function(m){return i(a),r(e.slideOpen(m))})("focus",function(m){return i(a),r(e.searchCustomer(m))}),s()()(),l(4,"input",6,0),g("ngModelChange",function(m){return i(a),C(e.value,m)||(e.value=m),r(m)}),f("blur",function(){return i(a),r(e.doBlur())})("focus",function(){return i(a),r(e.doFocus())})("keydown",function(m){return i(a),r(e.checkEnter(m))}),s(),x(6,le,32,7,"ng-template",null,1,j)}t&2&&(E("relative w-full ",e.className,""),c(),T(1,e.label?1:-1),c(2),y("name",e.name),y("placeholder",e.placeholder),M("items",e.items)("displayText",e.searchText)("btnClicked",e._disabled)("errorTrue",((e.control==null||e.control.control==null?null:e.control.control.invalid)||!1)&&e._errorTrue)("isLoading",e.loadingTrue),c(),y("name",e.name),y("placeholder",e.placeholder),h("ngModel",e.value),M("disabled",e._disabled)("id",e.name))},dependencies:[Z,X,U,z,G,H,K,J,A,$,ee],styles:["app-auto-complete[_ngcontent-%COMP%]{flex:1}"]});let u=p;return u})();export{ve as a};
