import{$ as r}from"./chunk-HG3JTMY3.js";var n=class{constructor(){this.items=[],this.cGst=0,this.sGst=0,this.sGstAmount=0,this.cGstAmount=0,this.totalAmount=0,this.totalTaxAmount=0,this.invoiceTotal=0,this.finalTotal=0,this.totalPCS=0,this.taxableValue=0,this.netWeight=0,this.grossWeight=0,this.roundOff=0}},m=(()=>{let i=class i{constructor(){this.invoice=new n}calculateInvoice(o,a,v){return new Promise(u=>{if(o.length!==0){console.log(o),this.invoice=JSON.parse(JSON.stringify(new n)),o.map(t=>{this.invoice.totalPCS=parseInt(t.quantity||0)+this.invoice.totalPCS,t.amount=parseInt(t.rate||0)*parseInt(t.quantity||0),this.invoice.taxableValue=parseInt(t.amount||0)+this.invoice.taxableValue,t?.netWeight&&(this.invoice.netWeight=parseFloat(this.invoice.netWeight)+parseFloat(t.netWeight||0)),t?.grossWeight&&(this.invoice.grossWeight=parseFloat(this.invoice.grossWeight)+parseFloat(t.grossWeight||0))});let c=parseFloat(a||0)*100,h=parseFloat(v||0)*100;if(c!==0){let t=this.invoice.taxableValue/parseInt(c);this.invoice.cGstAmount=parseFloat(t.toFixed(2))}if(h!==0){let t=this.invoice.taxableValue/parseInt(h);this.invoice.sGstAmount=parseFloat(t.toFixed(2))}let f=this.invoice.sGstAmount+this.invoice.cGstAmount;this.invoice.totalTaxAmount=parseFloat(f.toFixed(2));let p=this.invoice.taxableValue+this.invoice.totalTaxAmount;this.invoice.invoiceTotal=parseFloat(p.toFixed(2));let l=this.invoice.invoiceTotal%1,s=0;l<.5?(s=-l,this.invoice.invoiceTotal=Math.floor(this.invoice.invoiceTotal)):(s=1-l,this.invoice.invoiceTotal=Math.ceil(this.invoice.invoiceTotal));let g=(s>0?"+":"")+s.toFixed(2);this.invoice.roundOff=g,this.invoice.finalTotal=this.invoice.invoiceTotal+this.invoice.roundOff,this.invoice.items=JSON.parse(JSON.stringify(o))}u(this.invoice)})}};i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=r({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();export{m as a};
