import{a as ne}from"./chunk-HWNJXB2H.js";import{a as ee,b as re,c as te,d as oe}from"./chunk-QK2KRACR.js";import{a as ie}from"./chunk-Q4DACP65.js";import"./chunk-XJBA6BOJ.js";import{a as X}from"./chunk-F4HCV7MG.js";import"./chunk-MUTB2TKD.js";import"./chunk-FDQRYCWA.js";import{a as $}from"./chunk-UKV72QET.js";import{a as D,b as K}from"./chunk-UI4BADPC.js";import"./chunk-2HVRJBZQ.js";import"./chunk-6PZJJONO.js";import"./chunk-AESYL7IM.js";import{f as G,g as A,h as U,i as Q,j as Z,l as z,m as Y,p as J}from"./chunk-3ISTCKLJ.js";import{p as H,x as q}from"./chunk-WPRVVZZ7.js";import{j as B,l as R,m as W,p as j}from"./chunk-HXOPXUWF.js";import"./chunk-WHRSLBFN.js";import"./chunk-2R4VX25A.js";import{Bb as v,Hb as N,Ib as L,Jb as P,Lb as w,Nb as I,Pa as a,Qa as g,Rb as b,Sb as O,Tb as y,Vb as F,Wb as x,g as E,gb as T,ib as l,ka as k,nb as C,sb as o,tb as n,ua as m,ub as _,va as u,wa as S,wb as M,xa as V,zb as f}from"./chunk-HG3JTMY3.js";var le=["l"],pe=()=>["/home"],de=()=>["/home/order/preOrder"];function se(d,p){d&1&&(S(),o(0,"svg",36),_(1,"path",37),n())}function me(d,p){d&1&&(S(),o(0,"svg",38),_(1,"path",39),n())}function ue(d,p){if(d&1){let c=M();o(0,"div",31)(1,"button",35),f("click",function(){m(c);let r=v();return u(r.isEdit=!r.isEdit)}),T(2,se,2,0,":svg:svg",36)(3,me,2,0),n()()}if(d&2){let c=v();a(2),C(2,c.isEdit?3:2)}}function ce(d,p){d&1&&(o(0,"button",33),w(1," Cancel "),n()),d&2&&l("routerLink",x(1,de))}function he(d,p){if(d&1){let c=M();o(0,"button",33),w(1," Cancel "),n(),o(2,"button",40),f("click",function(){m(c);let r=v();return u(r.orderReceived())}),w(3," Order Received "),n()}d&2&&l("routerLink",x(1,de))}function ge(d,p){if(d&1){let c=M();o(0,"button",40),f("click",function(){m(c);let r=v();return u(r.save())}),w(1),n()}if(d&2){let c=v();a(),I(" ",c.type==="new"?"Save":"Update"," ")}}var Ie=(()=>{let p=class p{constructor(t,r,e,s,h,i,ae){this.appService=t,this.router=r,this.route=e,this.url=s,this.api=h,this.data=i,this.behavior=ae,this.preOrder=new H,this.id=0,this.type="",this.errorTrue=!1,this.isEdit=!1,this.route.paramMap.subscribe(we=>{this.init()}),this.appService.isNoMenu.set(!0),this.appService.screens=[{name:"Pre Orders"},{name:"Add New"}],this.appService.backUrl="/home/order/preOrder"}ngOnInit(){}init(){return E(this,null,function*(){let t=this.route.snapshot.paramMap.get("id"),r=yield this.url.decode(t);this.id=r.data,yield this.data.checkToken(),this.id===0?(this.type="new",this.create()):(this.type="edit",this.open())})}create(){this.api.createPreOrder().subscribe(t=>{this.preOrder=t})}open(){let t={data:this.id};this.api.openPreOrder(t).subscribe(r=>{this.preOrder=r})}save(){return E(this,null,function*(){if(this.lForm.valid){this.errorTrue=!1;let t=yield this.promiseOrder();this.preOrder=t,this.preOrder.preorderId!==0&&this.router.navigateByUrl("/home/order/preOrder")}else this.errorTrue=!0})}promiseOrder(){return new Promise(t=>{this.preOrder.preorderId===0?this.api.savePreOrder(this.preOrder).subscribe(r=>{t(r)}):this.api.updatePreOrder(this.preOrder).subscribe(r=>{t(r)})})}selectCustomer(t){this.preOrder.customerId=t.id,this.preOrder.iprotoCustomer.customerName=t.name}orderReceived(){this.preOrder.statusValue="COMTE",this.api.updatePreOrder(this.preOrder).subscribe(t=>{this.preOrder=t})}};p.\u0275fac=function(r){return new(r||p)(g(q),g(R),g(B),g($),g(K),g(D),g(oe))},p.\u0275cmp=k({type:p,selectors:[["app-pre-order-new"]],viewQuery:function(r,e){if(r&1&&N(le,5),r&2){let s;L(s=P())&&(e.lForm=s.first)}},standalone:!0,features:[F],decls:43,vars:29,consts:[["l","ngForm"],[1,"flex","flex-row","h-full","w-full","gap-x-4"],[1,"flex","flex-col","h-full","gap-y-2"],[1,"flex","items-center","gap-x-2.5"],["matRipple","",1,"w-8.5","h-8.5","rounded-lg","flex","items-center","justify-center","cursor-pointer","bg-white","border","border-grey-dc",3,"routerLink"],["width","22","height","20","viewBox","0 0 22 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.21101 19V8.76471H2L11.3578 1L20 8.61345H19.0642V18.9496H14.2752V12.1429H8.15596V19","stroke","#333333","stroke-miterlimit","10"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg",1,"stroke-menu-outline"],["clip-path","url(#clip0_118_782)"],["d","M1.32642 5.21053H10.6106C13.9264 5.21053 16.6738 7.95789 16.6738 11.2737C16.6738 14.5895 13.9264 17.3368 10.6106 17.3368H1.32642","stroke","#333333","stroke-miterlimit","10"],["d","M5.4001 9.37895L1.32642 5.21053L5.4001 1.13684","stroke-miterlimit","10"],["id","clip0_118_782"],["width","18","height","18","fill","white"],[1,"flex-1","flex","flex-col","h-full","w-full","gap-x-2","gap-y-2","bg-white","rounded-md"],[1,"flex-1","relative"],[1,"absolute","top-0","left-0","right-0","bottom-0","z-0","overflow-hidden"],[1,"relative","w-full","h-full","z-10","overflow-auto"],[1,"w-full",3,"ngSubmit"],[1,"grid","grid-cols-3","gap-x-4","p-4","border-b","border-grey-dc"],[1,"block"],["label","preorderRefNo","name","preorderRefNo",3,"ngModelChange","disabled","ngModel","required","errorTrue"],["label","Order Expected Date","name","orderExpectedDate",3,"ngModelChange","ngModel","required","errorTrue","disabled"],["label","Customer Name","name","Customer Name","name","customerId","valueType","int",3,"ngModelChange","onSelect","ngModel","displayText","required","errorTrue","disabled"],[1,"block","form-group"],[1,"text-xs","text-[#2b2b2b]","mb-2","font-semibold"],[1,"value"],["aria-label","choose vendor","name","isWithinChennai",3,"ngModelChange","ngModel","disabled"],["value","Y",3,"checked"],["value","N",3,"checked"],[1,"block","pt-3","mx-4"],["label","Notes","placeholder","Enter notes","name","notes",3,"ngModelChange","ngModel","required","errorTrue","disabled"],[1,"block","text-right","pt-3","mx-4"],[1,"flex","justify-end","items-center","gap-x-4","ml-auto","px-4"],["type","button",1,"dc-button","text-[#323232]","border","border-grey-dc","max-w-max","rounded-md","hover:bg-[#747474]","hover:text-white",3,"routerLink"],["type","submit",1,"dc-button","max-w-max","text-white","bg-[#B188FF]","border","border-[#722BE2]","rounded-md","hover:bg-[#722BE2]"],["type","button",1,"bg-primary-dc","w-8","h-8","rounded-full","inline-flex","items-center","justify-center",3,"click"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.75 13.5H6.93C7.0287 13.5006 7.12655 13.4817 7.21793 13.4443C7.30931 13.407 7.39242 13.352 7.4625 13.2825L12.6525 8.08502L14.7825 6.00002C14.8528 5.93029 14.9086 5.84734 14.9467 5.75595C14.9847 5.66455 15.0043 5.56652 15.0043 5.46752C15.0043 5.36851 14.9847 5.27048 14.9467 5.17908C14.9086 5.08769 14.8528 5.00474 14.7825 4.93502L11.6025 1.71752C11.5328 1.64722 11.4498 1.59142 11.3584 1.55335C11.267 1.51527 11.169 1.49567 11.07 1.49567C10.971 1.49567 10.873 1.51527 10.7816 1.55335C10.6902 1.59142 10.6072 1.64722 10.5375 1.71752L8.4225 3.84002L3.2175 9.03752C3.14799 9.1076 3.093 9.19071 3.05567 9.28209C3.01835 9.37346 2.99943 9.47131 3 9.57001V12.75C3 12.9489 3.07902 13.1397 3.21967 13.2803C3.36032 13.421 3.55109 13.5 3.75 13.5ZM11.07 3.30752L13.1925 5.43002L12.1275 6.49502L10.005 4.37252L11.07 3.30752ZM4.5 9.87752L8.9475 5.43002L11.07 7.55252L6.6225 12H4.5V9.87752ZM15.75 15H2.25C2.05109 15 1.86032 15.079 1.71967 15.2197C1.57902 15.3603 1.5 15.5511 1.5 15.75C1.5 15.9489 1.57902 16.1397 1.71967 16.2803C1.86032 16.421 2.05109 16.5 2.25 16.5H15.75C15.9489 16.5 16.1397 16.421 16.2803 16.2803C16.421 16.1397 16.5 15.9489 16.5 15.75C16.5 15.5511 16.421 15.3603 16.2803 15.2197C16.1397 15.079 15.9489 15 15.75 15Z","fill","white"],["width","18","height","18","viewBox","0 0 28 28","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5 23L14 14M14 14L23 5M14 14L5 5M14 14L23 23","stroke","#FFFFFF","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["type","submit",1,"dc-button","max-w-max","text-white","bg-[#B188FF]","border","border-[#722BE2]","rounded-md","hover:bg-[#722BE2]",3,"click"]],template:function(r,e){if(r&1){let s=M();o(0,"div",1)(1,"ol",2)(2,"li",3)(3,"a",4),S(),o(4,"svg",5),_(5,"path",6),n()(),V(),o(6,"a",4),S(),o(7,"svg",7)(8,"g",8),_(9,"path",9)(10,"path",10),n(),o(11,"defs")(12,"clipPath",11),_(13,"rect",12),n()()()()()(),V(),o(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",16)(18,"form",17,0),f("ngSubmit",function(){return m(s),u(e.save())}),o(20,"div",18)(21,"div",19)(22,"app-input-control",20),y("ngModelChange",function(i){return m(s),O(e.preOrder.preorderRefNo,i)||(e.preOrder.preorderRefNo=i),u(i)}),n()(),o(23,"div",19)(24,"app-date-control",21),y("ngModelChange",function(i){return m(s),O(e.preOrder.orderExpectedDate,i)||(e.preOrder.orderExpectedDate=i),u(i)}),n()(),o(25,"div",19)(26,"app-customer-search",22),y("ngModelChange",function(i){return m(s),O(e.preOrder.customerId,i)||(e.preOrder.customerId=i),u(i)}),f("onSelect",function(i){return m(s),u(e.selectCustomer(i))}),n()(),o(27,"div",23)(28,"label",24),w(29," Choose vendor / Consignor Type "),n(),o(30,"div",25)(31,"mat-radio-group",26),y("ngModelChange",function(i){return m(s),O(e.preOrder.vendorCogniseeType,i)||(e.preOrder.vendorCogniseeType=i),u(i)}),o(32,"mat-radio-button",27),w(33,"Chennai"),n(),o(34,"mat-radio-button",28),w(35,"Out of Chennai"),n()()()()(),o(36,"div",29)(37,"app-text-area",30),y("ngModelChange",function(i){return m(s),O(e.preOrder.notes,i)||(e.preOrder.notes=i),u(i)}),n()(),T(38,ue,4,1,"div",31),n()()()(),o(39,"div",32),T(40,ce,2,2,"button",33)(41,he,4,2)(42,ge,2,1,"button",34),n()()()}r&2&&(a(3),l("routerLink",x(28,pe)),a(3),l("routerLink",e.appService.backUrl),a(16),l("disabled",!0),b("ngModel",e.preOrder.preorderRefNo),l("disabled",!0)("required",!0)("errorTrue",e.errorTrue),a(2),b("ngModel",e.preOrder.orderExpectedDate),l("required",!0)("errorTrue",e.errorTrue)("disabled",e.preOrder.preorderId!==0&&!e.isEdit),a(2),b("ngModel",e.preOrder.customerId),l("displayText",e.preOrder.iprotoCustomer.customerName)("required",!0)("errorTrue",e.errorTrue)("disabled",e.preOrder.preorderId!==0&&!e.isEdit),a(5),b("ngModel",e.preOrder.vendorCogniseeType),l("disabled",e.preOrder.preorderId!==0&&!e.isEdit),a(),l("checked",e.preOrder.vendorCogniseeType==="Y"),a(2),l("checked",e.preOrder.vendorCogniseeType==="N"),a(3),b("ngModel",e.preOrder.notes),l("required",!0)("errorTrue",e.errorTrue)("disabled",e.preOrder.preorderId!==0&&!e.isEdit),a(),C(38,e.preOrder.preorderId!==0?38:-1),a(2),C(40,e.preOrder.preorderId===0?40:-1),a(),C(41,!e.isEdit&&e.preOrder.preorderId!==0?41:-1),a(),C(42,e.preOrder.preorderId===0||e.isEdit?42:-1))},dependencies:[j,W,J,ie,X,Y,Z,G,A,z,Q,U,te,ee,re,ne]});let d=p;return d})();export{Ie as PreOrderNewComponent};
